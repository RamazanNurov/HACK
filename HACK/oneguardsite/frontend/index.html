<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client Management System</title>
<link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
    <!-- –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <div id="app">
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è (–±—É–¥–µ—Ç —Å–∫—Ä—ã—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ª–æ–≥–∏–Ω–∞) -->
        <nav id="navbar" class="hidden">
            <div class="nav-brand">ClientSystem</div>
            <div class="nav-links">
                <a href="#engineer" class="nav-link">–ò–Ω–∂–µ–Ω–µ—Ä</a>
                <a href="#admin" class="nav-link">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</a>
                <button id="logout-btn" class="btn-secondary">–í—ã–π—Ç–∏</button>
            </div>
        </nav>

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü -->
        <div id="login-page" class="page active">
            <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–æ–≥–∏–Ω–∞ -->
            <div id="login-page" class="page active">
                <div class="login-container">
                    <h2>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
                    <form id="login-form">
                        <div class="form-group">
                            <label>–õ–æ–≥–∏–Ω:</label>
                            <input type="text" id="username" required>
                        </div>
                        <div class="form-group">
                            <label>–ü–∞—Ä–æ–ª—å:</label>
                            <input type="password" id="password" required>
                        </div>
                        <div class="form-group">
                            <label>–†–æ–ª—å:</label>
                            <select id="role">
                                <option value="engineer">–ò–Ω–∂–µ–Ω–µ—Ä</option>
                                <option value="admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                            </select>
                        </div>
                        <button type="submit" class="btn-primary">–í–æ–π—Ç–∏</button>
                    </form>
                </div>
            </div>
            
        </div>

        <div id="engineer-page" class="page hidden">
            <!-- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–Ω–∂–µ–Ω–µ—Ä–∞ -->
             <div id="engineer-page" class="page hidden">
                <div class="page-header">
                    <h1>–ü–∞–Ω–µ–ª—å –∏–Ω–∂–µ–Ω–µ—Ä–∞</h1>
                    <div class="status-indicators">
                        <div id="online-status" class="status-online">
                            <span class="status-dot"></span>
                            –û–Ω–ª–∞–π–Ω
                        </div>
                        <div id="gps-status" class="status-gps">
                             <span class="status-dot"></span>
                            GPS: –ù–µ –¥–æ—Å—Ç—É–ø–Ω–æ
                        </div>
                    </div>
                </div>

                <div class="content-grid">
                    <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞ -->
                    <div class="card">
                        <h2>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞</h2>
                        <form id="client-form" class="client-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="client-name">–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞ *</label>
                                    <input type="text" id="client-name" required>
                                </div>
                                <div class="form-group">
                                    <label for="client-phone">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
                                    <input type="tel" id="client-phone" required>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="client-type">–¢–∏–ø –æ–±—ä–µ–∫—Ç–∞ *</label>
                                    <select id="client-type" required>
                                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø</option>
                                        <option value="private_house">–ß–∞—Å—Ç–Ω—ã–π –¥–æ–º</option>
                                        <option value="hotel">–û—Ç–µ–ª—å</option>
                                        <option value="cafe">–ö–∞—Ñ–µ</option>
                                        <option value="restaurant">–†–µ—Å—Ç–æ—Ä–∞–Ω</option>
                                        <option value="office">–û—Ñ–∏—Å</option>
                                        <option value="other">–î—Ä—É–≥–æ–µ</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="client-address">–ê–¥—Ä–µ—Å *</label>
                                    <div class="address-input">
                                        <input type="text" id="client-address" required>
                                        <button type="button" id="get-location-btn" class="btn-icon" title="–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ">
                                            üìç
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="client-services">–¢—Ä–µ–±—É–µ–º—ã–µ —É—Å–ª—É–≥–∏</label>
                                <div class="services-checkboxes">
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="services" value="internet"> –ò–Ω—Ç–µ—Ä–Ω–µ—Ç
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="services" value="tv"> –¢–µ–ª–µ–≤–∏–¥–µ–Ω–∏–µ
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="services" value="cctv"> –í–∏–¥–µ–æ–Ω–∞–±–ª—é–¥–µ–Ω–∏–µ
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="services" value="telephony"> –¢–µ–ª–µ—Ñ–æ–Ω–∏—è
                                    </label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="client-needs">–û—Å–æ–±—ã–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏/–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</label>
                                <textarea id="client-needs" rows="3" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è..."></textarea>
                            </div>

                            <div class="form-group">
                                <label for="client-priority">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                                <select id="client-priority">
                                    <option value="low">–ù–∏–∑–∫–∏–π</option>
                                    <option value="medium" selected>–°—Ä–µ–¥–Ω–∏–π</option>
                                    <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                                </select>
                            </div>

                            <div class="form-actions">
                                <button type="button" id="save-draft-btn" class="btn-secondary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫</button>
                                <button type="submit" id="submit-client-btn" class="btn-primary">
                                    <span id="submit-text">–î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</span>
                                    <span id="submit-loading" class="hidden">–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...</span>
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- –°–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ -->
                    <div class="card">
                        <h2>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã</h2>
                        <div id="recent-clients-list" class="clients-list">
                            <div class="empty-state">
                                <p>–ö–ª–∏–µ–Ω—Ç—ã –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</p>
                            </div>
                        </div>
                    </div>

                    <!-- –û—Ñ–ª–∞–π–Ω-–æ—á–µ—Ä–µ–¥—å -->
                    <div id="offline-queue" class="card hidden">
                        <h2>–û—Ñ–ª–∞–π–Ω-–æ—á–µ—Ä–µ–¥—å</h2>
                        <div id="offline-queue-list" class="queue-list">
                            <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è JavaScript -->
                        </div>
                        <button id="sync-now-btn" class="btn-primary">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–µ–π—á–∞—Å</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="admin-page" class="page hidden">
            <!-- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
            <div id="admin-page" class="page hidden">
                <div class="page-header">
                    <h1>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>
                    <div class="admin-stats">
                        <div class="stat-card">
                            <div class="stat-value" id="total-clients">0</div>
                            <div class="stat-label">–í—Å–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–æ–≤</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="new-this-week">0</div>
                            <div class="stat-label">–ù–æ–≤—ã—Ö –∑–∞ –Ω–µ–¥–µ–ª—é</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="high-priority">0</div>
                            <div class="stat-label">–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</div>
                        </div>
                    </div>
                </div>

                <div class="admin-controls">
                    <!-- –§–∏–ª—å—Ç—Ä—ã -->
                    <div class="filters-card card">
                        <h3>–§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫</h3>
                        <div class="filters-grid">
                            <div class="form-group">
                                <label for="filter-date-from">–î–∞—Ç–∞ –æ—Ç</label>
                                <input type="date" id="filter-date-from">
                            </div>
                            <div class="form-group">
                                <label for="filter-date-to">–î–∞—Ç–∞ –¥–æ</label>
                                <input type="date" id="filter-date-to">
                            </div>
                            <div class="form-group">
                                <label for="filter-type">–¢–∏–ø –æ–±—ä–µ–∫—Ç–∞</label>
                                <select id="filter-type">
                                    <option value="">–í—Å–µ —Ç–∏–ø—ã</option>
                                    <option value="private_house">–ß–∞—Å—Ç–Ω—ã–π –¥–æ–º</option>
                                    <option value="hotel">–û—Ç–µ–ª—å</option>
                                    <option value="cafe">–ö–∞—Ñ–µ</option>
                                    <option value="restaurant">–†–µ—Å—Ç–æ—Ä–∞–Ω</option>
                                    <option value="office">–û—Ñ–∏—Å</option>
                                    <option value="other">–î—Ä—É–≥–æ–µ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="filter-service">–£—Å–ª—É–≥–∞</label>
                                <select id="filter-service">
                                    <option value="">–í—Å–µ —É—Å–ª—É–≥–∏</option>
                                    <option value="internet">–ò–Ω—Ç–µ—Ä–Ω–µ—Ç</option>
                                    <option value="tv">–¢–µ–ª–µ–≤–∏–¥–µ–Ω–∏–µ</option>
                                    <option value="cctv">–í–∏–¥–µ–æ–Ω–∞–±–ª—é–¥–µ–Ω–∏–µ</option>
                                    <option value="telephony">–¢–µ–ª–µ—Ñ–æ–Ω–∏—è</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="filter-priority">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                                <select id="filter-priority">
                                    <option value="">–í—Å–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã</option>
                                    <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                                    <option value="medium">–°—Ä–µ–¥–Ω–∏–π</option>
                                    <option value="low">–ù–∏–∑–∫–∏–π</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="filter-engineer">–ò–Ω–∂–µ–Ω–µ—Ä</label>
                                <select id="filter-engineer">
                                    <option value="">–í—Å–µ –∏–Ω–∂–µ–Ω–µ—Ä—ã</option>
                                </select>
                            </div>
                        </div>
                        <div class="search-row">
                            <div class="form-group search-group">
                                <label for="search-clients">–ü–æ–∏—Å–∫ –ø–æ –∫–ª–∏–µ–Ω—Ç–∞–º</label>
                                <input type="text" id="search-clients" placeholder="–ò–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω, –∞–¥—Ä–µ—Å...">
                            </div>
                            <div class="filter-actions">
                                <button id="apply-filters" class="btn-primary">–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
                                <button id="reset-filters" class="btn-secondary">–°–±—Ä–æ—Å–∏—Ç—å</button>
                            </div>
                        </div>
                    </div>

                    <!-- –≠–∫—Å–ø–æ—Ä—Ç -->
                    <div class="export-card card">
                        <h3>–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h3>
                        <div class="export-options">
                            <div class="form-group">
                                <label for="export-format">–§–æ—Ä–º–∞—Ç</label>
                                <select id="export-format">
                                    <option value="excel">Excel (.xlsx)</option>
                                    <option value="csv">CSV</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="export-range">–ü–µ—Ä–∏–æ–¥</label>
                                <select id="export-range">
                                    <option value="all">–í—Å–µ –¥–∞–Ω–Ω—ã–µ</option>
                                    <option value="today">–°–µ–≥–æ–¥–Ω—è</option>
                                    <option value="week">–≠—Ç–∞ –Ω–µ–¥–µ–ª—è</option>
                                    <option value="month">–≠—Ç–æ—Ç –º–µ—Å—è—Ü</option>
                                    <option value="custom">–í—ã–±—Ä–∞—Ç—å –ø–µ—Ä–∏–æ–¥</option>
                                </select>
                            </div>
                            <button id="export-btn" class="btn-primary">–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                        </div>
                    </div>
                </div>

                <!-- –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è -->
                <div class="charts-section">
                    <div class="card">
                        <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º –æ–±—ä–µ–∫—Ç–æ–≤</h3>
                        <div class="chart-container">
                            <canvas id="chart-types"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <h3>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —É—Å–ª—É–≥–∞–º</h3>
                        <div class="chart-container">
                            <canvas id="chart-services"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <h3>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ –¥–Ω—è–º</h3>
                        <div class="chart-container">
                            <canvas id="chart-activity"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <h3>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∫–ª–∏–µ–Ω—Ç–æ–≤</h3>
                        <div class="chart-container">
                            <canvas id="chart-priorities"></canvas>
                        </div>
                    </div>
                </div>

                <!-- –¢–∞–±–ª–∏—Ü–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ -->
                <div class="clients-table-section">
                    <div class="card">
                        <div class="table-header">
                            <h3>–ö–ª–∏–µ–Ω—Ç—ã</h3>
                            <div class="table-actions">
                                <div class="table-info">
                                    –ü–æ–∫–∞–∑–∞–Ω–æ: <span id="shown-count">0</span> –∏–∑ <span id="total-count">0</span>
                                </div>
                                <button id="refresh-data" class="btn-secondary">–û–±–Ω–æ–≤–∏—Ç—å</button>
                            </div>
                        </div>
                        <div class="table-container">
                            <table id="clients-table" class="clients-table">
                                <thead>
                                    <tr>
                                        <th data-sort="name">–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞</th>
                                        <th data-sort="type">–¢–∏–ø –æ–±—ä–µ–∫—Ç–∞</th>
                                        <th data-sort="phone">–¢–µ–ª–µ—Ñ–æ–Ω</th>
                                        <th data-sort="address">–ê–¥—Ä–µ—Å</th>
                                        <th data-sort="services">–£—Å–ª—É–≥–∏</th>
                                        <th data-sort="priority">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</th>
                                        <th data-sort="engineer">–ò–Ω–∂–µ–Ω–µ—Ä</th>
                                        <th data-sort="timestamp">–î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è</th>
                                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                    </tr>
                                </thead>
                                <tbody id="clients-table-body">
                                    <!-- –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è JavaScript -->
                                </tbody>
                            </table>
                        </div>
                        <div class="table-footer">
                            <div class="pagination">
                                <button id="prev-page" class="btn-secondary" disabled>–ù–∞–∑–∞–¥</button>
                                <span id="page-info">–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1 –∏–∑ 1</span>
                                <button id="next-page" class="btn-secondary" disabled>–í–ø–µ—Ä–µ–¥</button>
                            </div>
                            <div class="rows-per-page">
                                <label>–°—Ç—Ä–æ–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ:</label>
                                <select id="rows-per-page">
                                    <option value="10">10</option>
                                    <option value="25">25</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
        <div id="loading" class="hidden">
            <div class="loading-spinner">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </div>

    <script src="/static/js/app.js"></script>
    <script src="/static/js/auth.js"></script>
    <script src="/static/js/router.js"></script>
    <script src="/static/js/engineer.js"></script>
    <script src="/static/js/admin.js"></script>
    <script src="/static/js/offline.js"></script>

    <!-- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</body>
</html>